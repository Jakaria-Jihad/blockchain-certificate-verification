<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Edit Student</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="card">
    <h2>Edit Student</h2>
    {% if is_finalized %}
      <p class="muted">This student has been finalized and cannot be edited.</p>
    {% endif %}
    <form method="post" action="{{ url_for('edit_student', student_id=student.student_id) }}">
      <!-- editors cannot edit student_id or name; chief can edit name -->
      <label>Student ID</label>
      <input name="student_id" value="{{ student.student_id }}" readonly>

      <label>Name</label>
      <input name="name" value="{{ student.get('name','') }}" {% if role == 'editor' %}readonly{% endif %}>

      <label>Major</label>
      <input name="major" value="{{ student.get('major','') }}" {% if is_finalized %}readonly{% endif %} required>

      <label>Birth Date</label>
      <input name="birth_date" type="date" value="{{ student.get('birth_date','') }}" {% if is_finalized %}readonly{% endif %}>

      <label>CGPA</label>
      <input name="cgpa" type="number" step="0.01" value="{{ student.get('cgpa','') }}" {% if is_finalized %}readonly{% endif %}>

      <button type="submit" {% if is_finalized %}disabled{% endif %}>Save</button>
    </form>
    <a class="btn" href="{{ url_for(role + '_dashboard') }}">Back</a>
  </div>
</body>
</html>
